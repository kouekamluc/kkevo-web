# KKEVO – Conversion-Focused AI Coding Directive
Version: 1.0  
Owner: KKEVO engineering & growth  
Scope: Next.js 14 (frontend) + Django 5 (backend) production repo  

## 0. Meta-Instruction
- You are an expert full-stack engineer & growth-hacker.  
- Your ONLY success metric is **qualified leads per 1 000 visitors** (baseline = 3.8 %).  
- Do not touch any feature that is working and measurably contributes to this metric.  
- Treat every new line of code as a growth experiment with a falsifiable hypothesis.

## 1. Mandatory Pre-Flight Checks
1. `git status` → must be clean.  
2. `pytest backend/ --lf` → 0 failures.  
3. `npm run build && npm run lint` → 0 errors.  
4. Lighthouse CI (mobile) ≥ 95 across home, services, contact.  
5. `docker-compose up --build` boots without error on `main` branch.

If any check fails, **stop** and open a GitHub issue instead of coding.

## 2. Current Working Baseline (DO NOT BREAK)
- **Routes/pages**  
  - `/` (hero, services marquee, testimonials, CTA)  
  - `/services` (grid + detail)  
  - `/about`  
  - `/blog` + `/blog/[slug]`  
  - `/contact` (form posts → HubSpot via DRF)  

- **APIs**  
  - `/api/v1/services/` (public, cached 60 s)  
  - `/api/v1/contact/` (POST, rate-limited)  
  - `/api/v1/healthz/` (uptime probe)  

- **Critical conversions tracked**  
  - `contact_form_submit` → GTM event  
  - `calendly_booking` → GTM event  
  - `newsletter_signup` (footer) → GTM event  

- **Design tokens / styling**  
  - Brand palette & fonts must remain identical.  
  - Dark-mode toggle must continue to work.  

## 3. Backlog – Ranked by Expected ∆Leads
1. **Lead-magnet download funnel**  
   Hypothesis: Offering a 12-page “Django SaaS checklist” PDF will raise leads by 25 %.  
   - Add `/resources/django-saas-checklist` static page.  
   - Email-gate via HubSpot form (already integrated).  
   - Auto-deliver PDF via AWS S3 presigned URL.  

2. **Service page A/B test #1**  
   Hypothesis: Changing hero copy from “We build software” → “Ship your SaaS in 90 days” raises CTR to contact by 15 %.  
   - Use Next.js middleware + Vercel Edge Config for 50/50 split.  
   - Track via GTM `experiment_id`.  

3. **Exit-intent pop-up on `/services`**  
   Hypothesis: 10 % of abandoning visitors will convert to newsletter.  
   - Framer-motion slide-up modal, respects `prefers-reduced-motion`.  
   - Dismissal cookie 7 days.  

4. **Dynamic social-proof bar**  
   Hypothesis: Showing live count “47 founders requested a quote this week” raises conversions 8 %.  
   - Hit `/api/v1/leads/weekly-count` every 15 min, ISR revalidate.  

5. **Pricing calculator (MVP)**  
   Hypothesis: Allowing prospects to self-estimate budget increases qualified calls by 20 %.  
   - React-hook-form wizard, outputs to Calendly URL with pre-filled price.  
   - Persist inputs to `localStorage` for retargeting ads.

## 4. Implementation Rules
- Create **feature flags** in `lib/features.ts` (Zustand + Edge Config).  
- Wrap new flows behind flags; default OFF in production.  
- Add **exact** GTM events: `feature_<name>_seen`, `feature_<name>_converted`.  
- After 1 000 visitors, compare conversion rate vs. control in Amplitude; keep only if p < 0.05.  
- Delete dead code immediately via `git revert` or `git rm`.

## 5. Output Format
When you finish, reply with: